{
    "version": "https://jsonfeed.org/version/1",
    "title": "ジュウラン的随手笔记 • All posts by \"shokax\" tag",
    "description": "ジュウラン的随手笔记",
    "home_page_url": "https://blog.zyuuran.cn",
    "items": [
        {
            "id": "https://blog.zyuuran.cn/2023/10/09/shoka_algolia/",
            "url": "https://blog.zyuuran.cn/2023/10/09/shoka_algolia/",
            "title": "记录shoka(X)主题配置algolia",
            "date_published": "2023-10-09T05:19:32.000Z",
            "content_html": "<div class=\"note danger\">\n<p>这里我因为浏览器缓存的问题崩溃了，emmm……</p>\n</div>\n<div class=\"note info\">\n<p>Github 项目地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL0xvdWlzQmFycmFucXVlaXJvL2hleG8tYWxnb2xpYXNlYXJjaA==\">https://github.com/LouisBarranqueiro/hexo-algoliasearch</span><br>\n 参考地址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWUvY29tcHV0ZXItc2NpZW5jZS9ub3RlL3RoZW1lLXNob2thLWRvYy9kZXBlbmRlbnRzLw==\">https://shoka.lostyu.me/computer-science/note/theme-shoka-doc/dependents/</span></p>\n</div>\n<p>记录一下安装 algolia 搜索插件的过程</p>\n<h1 id=\"安装hexo-algoliasearch\"><a class=\"markdownIt-Anchor\" href=\"#安装hexo-algoliasearch\">#</a> 安装 hexo-algoliasearch</h1>\n<p>安装命令</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">npm</span> <span class=\"token function\">install</span> hexo-algoliasearch <span class=\"token parameter variable\">--save</span></pre></td></tr></table></figure><p>根据 npm 给出的文档中，需要在 <code>_config.yml</code>  文件中加入</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">plugins</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token punctuation\">-</span> hexo<span class=\"token punctuation\">-</span>algoliasearch</pre></td></tr></table></figure><p>在 shokaX 主题中，只需要安装，默认配置好了</p>\n<h1 id=\"配置config\"><a class=\"markdownIt-Anchor\" href=\"#配置config\">#</a> 配置 config</h1>\n<p>接下来配置_config.shoka (X).yml 和_config.yml</p>\n<p>先去 algolia 官网<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kYXNoYm9hcmQuYWxnb2xpYS5jb20v\"> https://dashboard.algolia.com/</span> 注册登录<br>\n建立一个 index<br>\n 根据 github 给出的配置文档</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>_config.yml</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">algolia</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">appId</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your appId</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token key atrule\">apiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your apiKey</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">adminApiKey</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#Your adminApiKey</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">chunkSize</span><span class=\"token punctuation\">:</span> <span class=\"token number\">5000</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">indexName</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#\"shoka\"</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">fields</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token punctuation\">-</span> title <span class=\"token comment\">#必须配置</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">-</span> path <span class=\"token comment\">#必须配置</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token punctuation\">-</span> categories <span class=\"token comment\">#推荐配置</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">-</span> content<span class=\"token punctuation\">:</span>strip<span class=\"token punctuation\">:</span>truncate<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2000</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">-</span> gallery</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token punctuation\">-</span> photos</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token punctuation\">-</span> tags</pre></td></tr></table></figure><p>从 algolia 找到<span class=\"kbd\"> Settings</span>-<span class=\"kbd\">API Keys</span><br>\n 其中</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">appId</span><span class=\"token punctuation\">:</span> Application ID</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">apiKey</span><span class=\"token punctuation\">:</span> Search<span class=\"token punctuation\">-</span>Only API Key</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">adminApiKey</span><span class=\"token punctuation\">:</span> Admin API Key</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">indexName</span><span class=\"token punctuation\">:</span> 你创建index时用的名字</pre></td></tr></table></figure><p>这些设置好后去根目录下的’_config.shoka (X).yml’中修改一下</p>\n<figure class=\"highlight yml\"><figcaption data-lang=\"YAML\"><span>_config.shoka(X).yml</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># Algolia Search</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># For more information: https://www.algolia.com</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">golia_search</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">enable</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">hits</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token key atrule\">per_page</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token comment\"># the number of search results per page</span></pre></td></tr></table></figure><div class=\"note warning\">\n<p>注意文件名</p>\n</div>\n<h1 id=\"开始生成静态文件\"><a class=\"markdownIt-Anchor\" href=\"#开始生成静态文件\">#</a> 开始生成静态文件</h1>\n<p>先设置环境</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Windows:</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token builtin class-name\">set</span> <span class=\"token assign-left variable\">HEXO_ALGOLIA_INDEXING_KEY</span><span class=\"token operator\">=</span>your adminApiKey</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Linux:</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token builtin class-name\">export</span> <span class=\"token assign-left variable\">HEXO_ALGOLIA_INDEXING_KEY</span><span class=\"token operator\">=</span>your adminApiKey</pre></td></tr></table></figure><p>然后执行命令</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo clean</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>hexo g</pre></td></tr></table></figure><div class=\"note warning\">\n<p>请确保你 public 文件下没有其他的文件，因为它会 rm -rf public</p>\n</div>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>hexo a</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>hexo g</pre></td></tr></table></figure><p>这里我遇到的问题是，我只能 <code>hexo g</code>  后运行 <code>hexo a</code>  再运行 <code>hexo g</code> <br>\n 所以前面的 <code>hexo clean &amp; hexo g</code>  命令我直接跳过了<br>\n现在 <code>hexo s</code>  测试一下是否可以使用<br>\n然后 <code>hexo d</code>  上传 或者通过你部署的云提供的软件同步一下 public 目录下的文件</p>\n<div class=\"note danger\">\n<p>如果 localhost 访问可以成使用，而云端无法使用，请删除浏览器缓存</p>\n</div>\n",
            "tags": [
                "hexo",
                "shoka",
                "shokaX"
            ]
        }
    ]
}